[[packages]]
versioned_files = [
	"crates/lib/Cargo.toml",
	"crates/python/Cargo.toml"
]
changelog = "CHANGELOG.md"

[[workflows]]
name = "release"

[[workflows.steps]]
type = "PrepareRelease"

[[workflows.steps]]
type = "Command"
command = "cargo update -w"

[[workflows.steps]]
type = "Command"
command = "git add Cargo.toml Cargo.lock crates/lib/Cargo.toml crates/python/Cargo.toml CHANGELOG.md && git commit -m \"chore: prepare release $version\" && git push"

[workflows.steps.variables]
"$version" = "Version"

[[workflows.steps]]
type = "Release"

[[workflows]]
name = "prerelease"

[[workflows.steps]]
type = "PrepareRelease"
prerelease_label = "rc"

[[workflows.steps]]
type = "Command"
command = "cargo update -w && git add CHANGELOG.md Cargo.toml Cargo.lock crates/lib/Cargo.toml crates/python/Cargo.toml && git commit -m \"chore: prepare release $version\""

[workflows.steps.variables]
"$version" = "Version"

[[workflows.steps]]
type = "Release"

[github]
owner = "rigetti"
repo = "qcs-sdk-rust"
